---
alias: /binary-sensor/basement-presence/on

id: binary_sensor_basement_presence_on

description: Pauses Cosmo when someone enters the basement while he's cleaning.

mode: restart

max_exceeded: silent

trigger:
  - platform: state
    entity_id: binary_sensor.basement_occupancy
    to: "on"

action:
  - parallel:
      - alias: Cosmo Pause
        if: >
          {{
            is_state('vacuum.cosmo', 'cleaning') and
            is_state('sensor.cosmo_current_room', 'Basement')
          }}

        then:
          - service: vacuum.pause
            target:
              entity_id: vacuum.cosmo

      - service: switch.turn_on
        target:
          entity_id: switch.basement_christmas_tree
