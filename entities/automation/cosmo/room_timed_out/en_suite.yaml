---
alias: /cosmo/room-timed-out/en-suite

description: The en-suite has not been cleaned for N hours

id: cosmo_room_timed_out_en_suite

mode: single

max_exceeded: silent

trigger:
    # No need for an input_number trigger because this will check every minute anyway
  platform: template
  value_template: >-
    {{
      (
        now() | as_timestamp - states('input_datetime.cosmo_last_en_suite_clean') | as_timestamp
      ) > states('input_number.cosmo_room_timeout_en_suite') | int(168)
    }}

action:
  - service: script.cosmo_send_clean_requests
    data:
      room: en_suite
