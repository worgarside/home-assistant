---
alias: /input-boolean/system/reload-required/turn-on
id: input_boolean_system_reload_required_turn_on
trigger:
  - platform: event
    event_type: folder_watcher
    event_data:
      event_type: created
  - platform: event
    event_type: folder_watcher
    event_data:
      event_type: deleted
  - platform: event
    event_type: folder_watcher
    event_data:
      event_type: modified
  - platform: event
    event_type: folder_watcher
    event_data:
      event_type: moved
condition: >
  {%
    set patterns = [
      '^/config/entities/(automation|binary_sensor|script|shell_command|template|var)/',
      '^/config/entities/command_line/(binary_)?sensor/',
      '^/config/entities/input_[a-z_]*/',
      '^/config/integrations/input_[a-z_]+\.yaml',
      '^/config/integrations/(rest|shell)_command\.yaml',
      '^/config/integrations/(automation|binary_sensor|command_line|cover|device_tracker)\.yaml',
      '^/config/integrations/(folder_watcher|group|lovelace|media_player|mqtt|scene|script)\.yaml',
      '^/config/integrations/(sensor|template|timer|tts|var|webhook|zone)\.yaml',
      '^/lovelace/',
    ]
  %}
  {% set match_found = false %}

  {% for pattern in patterns if trigger.event.data.folder | regex_match(pattern) %}
    {% set match_found = true %}
    {% break %}
  {% endfor %}

  {{ match_found }}
action:
  - service: input_boolean.turn_on
    entity_id: input_boolean.system_reload_required
  - service: script.debug_persistent_notification
    data:
      title: "System Entity Activated"
      message: >-
        `input_boolean.system_reload_required` has been set to `on` because
        `{{ trigger.event.data.file }}` has been {{ trigger.event.data.event_type }}.
