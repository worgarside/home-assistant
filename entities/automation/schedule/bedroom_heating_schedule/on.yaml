---
alias: /schedule/bedroom-heating-schedule/on

id: schedule_bedroom_heating_schedule_on

description: Activate bedroom heating when schedule turns on

mode: single

trigger:
  - platform: state
    entity_id: schedule.bedroom_heating_schedule
    from: "off"
    to: "on"

condition:
  - and:
      - alias: Someone is home
        condition: numeric_state
        entity_id: zone.home
        above: 0
      - alias: It's cold outside
        condition: numeric_state
        entity_id: sensor.met_office_fulham_temperature
        below: 15

action:
  - if: "{{ is_state('input_boolean.turn_off_bedroom_fan_for_scheduled_heating', 'on') }}"
    then:
      - action: fan.turn_off
        target:
          area_id: bedroom

  - action: climate.set_hvac_mode
    data:
      hvac_mode: heat
    target:
      entity_id:
        - climate.bedroom_radiator_1
        - climate.bedroom_radiator_2

  - service: switch.turn_on
    target:
      entity_id: switch.central_heating