---
alias: /remote/coffee-table/single-press

description: Set the scene for watching TV

id: remote_coffee_table_single_press

mode: single

trigger:
  - platform: event
    event_type: zha_event
    event_data:
      command: single
      device_ieee: 00:15:8d:00:07:6b:66:8b

action:
  - parallel:
      - if: "{{ not states('remote.lounge_tv') | bool }}"

        then:
          - service: remote.turn_on
            target:
              entity_id: remote.lounge_tv

      - if: "{{ not states('remote.lounge_chromecast') | bool }}"

        then:
          - service: switch.turn_off
            entity_id: switch.lounge_chromecast_outlet

          - delay:
              seconds: 2.5

          - service: switch.turn_on
            entity_id: switch.lounge_chromecast_outlet

      - service: media_player.select_source
        target:
          entity_id: media_player.hifi_system
        data:
          source: Lounge Chromec

      - service: light.turn_on
        target:
          entity_id:
            - light.lounge_shapes
            - light.shelf_lamp
            - light.mini_lamp
        data:
          brightness_pct: 50

      - service: light.turn_off
        target:
          area_id:
            - hallway
            - kitchen
