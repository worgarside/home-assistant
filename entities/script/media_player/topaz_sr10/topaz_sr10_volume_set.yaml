---
description: Set the volume of the Topaz SR10 to a specific value

mode: restart

fields:
  volume_level:
    description: The volume level to set the Topaz SR10 to
    required: true

sequence:
  - variables:
      initial_level: "{{ state_attr('media_player.topaz_sr10', 'volume_level') | int(0) }}"

      up_or_down: "{{ iif( initial_level | int > volume_level | int, 'down', 'up') }}"

      repeat_count: "{{ (initial_level | int - volume_level | int) | abs }}"

  - repeat:
      count: "{{ repeat_count }}"
      sequence:
        - service: media_player.volume_{{ up_or_down }}
          target:
            entity_id: media_player.topaz_sr10
