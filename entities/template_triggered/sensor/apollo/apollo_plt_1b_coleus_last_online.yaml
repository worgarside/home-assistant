---
trigger:
  - platform: state
    entity_id: binary_sensor.apollo_plt_1b_1511bc_online

  - platform: state
    entity_id: sensor.apollo_plt_1b_coleus_last_online
    to: "unknown"

sensor:
  - name: "Apollo PLT 1B | Coleus: Last Online"

    unique_id: apollo_plt_1b_coleus_last_online

    icon: mdi:clock-outline

    device_class: timestamp

    state: >
      {% if is_state('binary_sensor.apollo_plt_1b_1511bc_online', 'on') %}
        {{ now() }}
      {% else %}
        {{
          states.binary_sensor.apollo_plt_1b_1511bc_online.last_changed
          | default("1970-01-01T00:00:00+00:00")
        }}
      {% endif %}
