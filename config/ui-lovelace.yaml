---
title: !secret address_line_1

decluttering_templates:
  active_media_player_template:
    default:
      icon: speaker
    card:
      type: conditional
      conditions:
        - entity: "binary_sensor.[[binary_sensor_name]]_active"
          state: "on"
      card:
        type: custom:mini-media-player
        entity: "media_player.[[media_player]]"
        icon: "mdi:[[icon]]"
        artwork: cover
        hide:
          volume: true
          power_state: false

  tfl_service_warning_template:
    card:
      type: conditional
      conditions:
        - entity: "sensor.[[tfl_line]]"
          state_not: "Good Service"
      card:
        type: custom:mod-card
        style: |
          ha-card { 
            color: green;
            --ha-card-background: 
            {% if "good service" in (states("sensor.[[tfl_line]]") | lower) %}
              #007229;
            {% elif "minor delays" in (states("sensor.[[tfl_line]]") | lower) %}
              #BA6F08;
            {% elif "part closure" in (states("sensor.[[tfl_line]]") | lower) %}
              #BA6F08;
            {% elif "part suspended" in (states("sensor.[[tfl_line]]") | lower) %}
              #BA6F08;
            {% elif "planned closure" in (states("sensor.[[tfl_line]]") | lower) %}
              #D80000;
            {% elif "reduced service" in (states("sensor.[[tfl_line]]") | lower) %}
              #BA6F08;
            {% elif "service closed" in (states("sensor.[[tfl_line]]") | lower) %}
              #D80000;
            {% elif "severe delays" in (states("sensor.[[tfl_line]]") | lower) %}
              #D80000;
            {% elif "special service" in (states("sensor.[[tfl_line]]") | lower) %}
              #BA6F08;
            {% elif "suspended" in (states("sensor.[[tfl_line]]") | lower) %}
              #D80000;
            {% else %}
              #FFFFFF;
            {% endif %}
            margin: 10px;
          }
        card:
          type: entities
          entities:
            - entity: "sensor.[[tfl_line]]"
              state_color: true
              card_mod:
                style: |
                  :host {
                    --card-mod-icon-color: black;
                  }

views:
  - !include lovelace/home.yaml
  - !include lovelace/home_control.yaml
  - !include lovelace/media_dashboard.yaml
  - !include lovelace/london.yaml
