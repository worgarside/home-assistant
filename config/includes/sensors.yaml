---
  - platform: london_air

  - platform: london_underground
    line:
      - Bakerloo
      - Central
      - Circle
      - District
      - DLR
      - Hammersmith & City
      - Jubilee
      - London Overground
      - Metropolitan
      - Northern
      - Piccadilly
      - TfL Rail
      - Victoria
      - Waterloo & City

#  - platform: citybikes
#    name: Boris Bikes
#    network: Santander Cycles
#    stations:
#      - 200217
#      - 200205
#      - 300033

  - platform: rest
    resource: http://ip.jsontest.com
    name: External IP
    scan_interval: 300
    value_template: "{{ value_json.ip }}"

  - platform: rest
    name: Mini CRT Power State
    method: GET
    scan_interval: 60
    force_update: true
    resource: "http://192.168.1.170:5000/crt/state"
    headers:
      Content-Type: application/json
    value_template: "{{ value_json.state }}"

  - platform: rest
    name: Mini CRT Nanoleaf Updater State
    method: GET
    scan_interval: 60
    force_update: true
    resource: "http://192.168.1.170:5000/nanoleaf-mirror/state"
    headers:
      Content-Type: application/json
    value_template: "{{ value_json.state }}"

  - platform: rest
    name: Will's Room Curtain Position
    method: GET
    force_update: true
    resource: !secret switchbot_curtain_status_endpoint
    headers:
      Authorization: !secret switchbot_api_key
      Content-Type: application/json
    value_template: "{{ value_json['body']['slidePosition'] }}"
    unit_of_measurement: '%'

  - platform: rest
    name: Nabu Casa Online
    method: GET
    scan_interval: 150
    force_update: true
    resource: !secret nabu_casa_url_online_sensor
    headers:
      Authorization: !secret nabu_casa_online_access_token
      Content-Type: application/json
    value_template: "{{ value_json['state'] }}"

  - platform: spotcast
    country: GB

  - platform: sql
#    icon: mdi:database
    db_url: !secret mariadb_db_url
    queries:
      - name: Database Size
        # yamllint disable-line rule:line-length
        query: 'SELECT table_schema "database", Round(Sum(data_length + index_length) / 1048576, 2) "value" FROM information_schema.tables WHERE table_schema="homeassistant" GROUP BY table_schema'
        column: 'value'
        unit_of_measurement: MB

  - platform: systemmonitor
    resources:
      - type: disk_use_percent
      - type: disk_use
      - type: disk_free
      - type: memory_use_percent
      - type: memory_use
      - type: memory_free
      - type: swap_use_percent
      - type: swap_use
      - type: swap_free
      - type: load_1m
      - type: load_5m
      - type: load_15m
      - type: network_in
        arg: eth0
      - type: network_out
        arg: eth0
      - type: throughput_network_in
        arg: eth0
      - type: throughput_network_out
        arg: eth0
      - type: packets_in
        arg: eth0
      - type: packets_out
        arg: eth0
      - type: ipv4_address
        arg: eth0
      - type: ipv6_address
        arg: eth0
      - type: processor_use
      - type: processor_temperature

