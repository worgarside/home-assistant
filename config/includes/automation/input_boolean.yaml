---
  - alias: /input_boolean/mini_crt_power/state-from-crt
    id: input_boolean_mini_crt_power_state_from_crt
    trigger:
      - platform: mqtt
        topic: /home-assistant/crt-pi/state-from-crt
    action:
      - service: script.debug_persistent_notification
        data:
          title: Mini CRT Power State
          message: '{{ trigger.payload }}'
      - choose:
          - conditions: "{{ trigger.payload  | string | lower == 'true' }}"
            sequence:
              - service: input_boolean.turn_on
                data:
                  entity_id: input_boolean.mini_crt_power
          - conditions: "{{ trigger.payload  | string | lower == 'false' }}"
            sequence:
              - service: input_boolean.turn_off
                data:
                  entity_id: input_boolean.mini_crt_power
        default:
          - service: persistent_notification.create
            data:
              title: Mini CRT Power State
              message: 'Unknown state: {{ trigger.payload }}'
              notification_id: mini_crt_power_state_unknown

  - alias: /input_boolean/mini_crt_power/state-from-ha
    id: input_boolean_mini_crt_power_state_from_ha
    trigger:
      - platform: state
        entity_id: input_boolean.mini_crt_power
        for:
          seconds: 1
    action:
      - service: mqtt.publish
        data:
          topic: /home-assistant/crt-pi/state-from-ha
          payload: '{{ trigger.to_state.state }}'
