---
title: System Health

icon: mdi:home-assistant

path: system_health

type: custom:vertical-layout

cards:
  - type: vertical-stack
    cards:
      - type: custom:mushroom-title-card
        title: "{{ states('sensor.address_line_1') }}"
      - type: custom:mushroom-chips-card
        chips:
          - type: entity
            entity: sensor.current_version
            icon: mdi:home-assistant
            icon_color: "#0EBEF2"
          - type: entity
            entity: sensor.current_git_ref
            icon: mdi:git
            icon_color: "#E84D32"
            double_tap_action:
              action: url
              url_path: https://github.com/worgarside/home-assistant
          - type: entity
            entity: sensor.current_git_branch
            icon: mdi:source-branch
            icon_color: "#AD20ED"
            double_tap_action:
              action: ur
              url_path: https://github.com/worgarside/home-assistant

  - type: custom:vertical-stack-in-card
    cards:
      - type: horizontal-stack
        cards:
          - entity: sensor.speedtest_download
            type: custom:mushroom-entity-card
            name: Download
            icon_color: green
          - entity: sensor.speedtest_upload
            type: custom:mushroom-entity-card
            name: Upload
            icon_color: pink
          - entity: sensor.speedtest_ping
            type: custom:mushroom-entity-card
            name: Ping
            icon_color: yellow
      - type: custom:mini-graph-card
        entities:
          - entity: sensor.speedtest_download
            name: Download
            color: var(--green-color)
          - entity: sensor.speedtest_upload
            name: Upload
            color: var(--pink-color)
          - entity: sensor.speedtest_ping
            name: Ping
            color: var(--yellow-color)
            y_axis: secondary
        hours_to_show: 24
        points_per_hour: 1
        line_width: 2
        show:
          labels: false
          fill: fade
          name: false
          icon: false
          state: false
          legend: false

  - type: entities
    entities:
      - type: custom:auto-entities
        card:
          type: custom:fold-entity-row
          head:
            type: custom:mushroom-entity-card
            entity: sensor.count_unavailable_entities
            name: Unavailable Entities
            icon_color: red
        sort:
          method: domain
        filter:
          template: >
            {{
              state_attr('sensor.count_unavailable_entities', 'entities') |
              select('is_state', 'unavailable') | list
            }}
      - type: custom:auto-entities
        card:
          type: custom:fold-entity-row
          head:
            type: custom:mushroom-entity-card
            entity: sensor.count_low_batteries
            name: Low Batteries
            icon_color: orange
        sort:
          method: domain
        filter:
          template: >
            {{
              state_attr("sensor.count_low_batteries", "entities") |
              map(attribute="entity_id") |
              list
            }}

  - type: custom:layout-break

  - type: entities
    title: Entity Counts
    entities:
      - type: custom:layout-card
        layout_type: custom:horizontal-layout
        layout:
          width: 175
          max_cols: 2
        cards:
          - entity: sensor.count_automations
            name: Automations
            type: custom:mushroom-entity-card
          - entity: sensor.count_binary_sensors
            name: Binary Sensors
            type: custom:mushroom-entity-card
          - entity: sensor.database_size
            name: Database Size
            type: custom:mushroom-entity-card
          - entity: sensor.count_device_trackers
            name: Devices
            type: custom:mushroom-entity-card
          - entity: sensor.count_input_booleans
            name: Input Booleans
            type: custom:mushroom-entity-card
          - entity: sensor.count_input_datetimes
            name: Input Datetimes
            type: custom:mushroom-entity-card
          - entity: sensor.count_input_numbers
            name: Input Numbers
            type: custom:mushroom-entity-card
          - entity: sensor.count_input_selects
            name: Input Selects
            type: custom:mushroom-entity-card
          - entity: sensor.count_input_texts
            name: Input Texts
            type: custom:mushroom-entity-card
          - entity: sensor.count_scripts
            name: Scripts
            type: custom:mushroom-entity-card
          - entity: sensor.count_sensors
            name: Sensors
            type: custom:mushroom-entity-card
          - entity: sensor.count_switches
            name: Switches
            type: custom:mushroom-entity-card
          - entity: sensor.count_updates
            name: Updates
            type: custom:mushroom-entity-card
          - entity: sensor.count_zones
            name: Zones
            type: custom:mushroom-entity-card

  - type: custom:layout-break

  - type: custom:vertical-stack-in-card
    cards:

      - type: custom:layout-card
        layout_type: custom:horizontal-layout
        layout:
          width: 100
          max_cols: 3
        cards:
          - type: custom:decluttering-card
            template: pi_online_entity_template
            variables:
              - color: '#E51919'
              - name: ClmtPi
              - slug: clmtpi
          - type: custom:decluttering-card
            template: pi_online_entity_template
            variables:
              - color: '#E5C819'
              - name: CRTPi
              - sluge: crtpi
          - type: custom:decluttering-card
            template: pi_online_entity_template
            variables:
              - color: '#53E519'
              - name: GrowPi
              - slug: growpi
          - type: custom:decluttering-card
            template: pi_online_entity_template
            variables:
              - color: '#19E58E'
              - name: HAssPi
              - slug: hasspi
          - type: custom:decluttering-card
            template: pi_online_entity_template
            variables:
              - color: '#198EE5'
              - name: MtrxPi
              - slug: mtrxpi
          - type: custom:decluttering-card
            template: pi_online_entity_template
            variables:
              - color: '#5319E5'
              - name: RtroPi
              - slug: rtropi
          - type: custom:decluttering-card
            template: pi_online_entity_template
            variables:
              - color: '#E519C8'
              - name: VSMPPi
              - slug: vsmppi
