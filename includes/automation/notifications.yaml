---
  - alias: /notification/credit_card_top_up/send
    id: send_cc_top_up_notif
    trigger:
      - platform: time
        at:
          - "21:00:00"
    condition: |
      {{
        ( states('var.truelayer_balance_amex') | float -
        states('var.truelayer_balance_monzo_credit_cards') | float ) > 0.0
      }}
    action:
      - service: notify.mobile_app_will_s_pixel_6_pro
        data:
        # yamllint disable-line rule:line-length
          message: Credit Cards pot is Â£{{ '%.2f' % ( ( states('var.truelayer_balance_amex') | float - states('var.truelayer_balance_monzo_credit_cards') | float ) | round(2) ) }} too low. Top up pot?
          data:
            actions:
              - action: TOP_UP_CREDIT_CARD_POT
                title: Top Up

  - alias: /notification/will_s_balcony_door/rain_alert
    id: notification_will_s_balcony_door_rain_alert
    trigger:
      - platform: numeric_state
        entity_id: sensor.openweathermap_rain
        above: 0.5
        for:
          minutes: 5
    condition:
      condition: state
      state: "on"
      entity_id:
        - binary_sensor.will_s_balcony_door
    action:
      - service: notify.mobile_app_will_s_pixel_6_pro
        data:
          message: It's raining and your balcony door is open!
