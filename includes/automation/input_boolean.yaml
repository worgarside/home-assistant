---

# Mini CRT

  - alias: /input_boolean/mini_crt_power/state-from-crt
    id: input_boolean_mini_crt_power_state_from_crt
    trigger:
      - platform: mqtt
        topic: /home-assistant/crt-pi/state-from-crt
    action:
      - service: script.debug_persistent_notification
        data:
          title: Mini CRT Power State
          message: '{{ trigger.payload }}'
      - choose:
          - conditions: "{{ trigger.payload  | string | lower == 'true' }}"
            sequence:
              - service: input_boolean.turn_on
                data:
                  entity_id: input_boolean.mini_crt_power
          - conditions: "{{ trigger.payload  | string | lower == 'false' }}"
            sequence:
              - service: input_boolean.turn_off
                data:
                  entity_id: input_boolean.mini_crt_power
        default:
          - service: persistent_notification.create
            data:
              title: Mini CRT Power State
              message: 'Unknown state: {{ trigger.payload }}'
              notification_id: mini_crt_power_state_unknown

  - alias: /input_boolean/mini_crt_power/state-from-ha
    id: input_boolean_mini_crt_power_state_from_ha
    trigger:
      - platform: state
        entity_id: input_boolean.mini_crt_power
        for:
          seconds: 1
    action:
      - service: mqtt.publish
        data:
          topic: /home-assistant/crt-pi/state-from-ha
          payload: '{{ trigger.to_state.state }}'

# Room Control: Bedroom

  - alias: /input_boolean/bedroom_entity_header/on
    id: input_boolean_bedroom_entity_header_on
    trigger:
      - platform: state
        entity_id: input_boolean.bedroom_entity_header
        to: "on"
    action:
      - service: light.turn_on
        target:
          area_id: bedroom

  - alias: /input_boolean/bedroom_entity_header/off
    id: input_boolean_bedroom_entity_header_off
    trigger:
      - platform: state
        entity_id: input_boolean.bedroom_entity_header
        to: "off"
    action:
      - service: script.turn_off_physical_room
        data:
          room: bedroom

# Room Control: Lounge

  - alias: /input_boolean/lounge_entity_header/on
    id: input_boolean_lounge_entity_header_on
    trigger:
      - platform: state
        entity_id: input_boolean.lounge_entity_header
        to: "on"
    action:
      - service: light.turn_on
        target:
          area_id: lounge

  - alias: /input_boolean/lounge_entity_header/off
    id: input_boolean_lounge_entity_header_off
    trigger:
      - platform: state
        entity_id: input_boolean.lounge_entity_header
        to: "off"
    action:
      - service: script.turn_off_physical_room
        data:
          room: lounge

# Room Control: Office

  - alias: /input_boolean/office_entity_header/on
    id: input_boolean_office_entity_header_on
    trigger:
      - platform: state
        entity_id: input_boolean.office_entity_header
        to: "on"
    action:
      - service: light.turn_on
        target:
          area_id: office

  - alias: /input_boolean/office_entity_header/off
    id: input_boolean_office_entity_header_off
    trigger:
      - platform: state
        entity_id: input_boolean.office_entity_header
        to: "off"
    action:
      - service: script.turn_off_physical_room
        data:
          room: office
